{% include 'cadmin/header.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">

    <style>
        a{
        text-decoration:none;
        }
        /* CSS */
        .button-25 {
          background-color: #36A9AE;
          background-image: linear-gradient(#37ADB2, #329CA0);
          border: 1px solid #2A8387;
          border-radius: 4px;
          box-shadow: rgba(0, 0, 0, 0.12) 0 1px 1px;
          color: #FFFFFF;
          cursor: pointer;
          display: block;
          font-family: -apple-system,".SFNSDisplay-Regular","Helvetica Neue",Helvetica,Arial,sans-serif;
          font-size: 17px;
          line-height: 100%;
          margin: 0;
          outline: 0;
          padding: 11px 15px 12px;
          text-align: center;
          transition: box-shadow .05s ease-in-out,opacity .05s ease-in-out;
          user-select: none;
          -webkit-user-select: none;
          touch-action: manipulation;
          width: 10%;

        }

        .button-25:hover {
          box-shadow: rgba(255, 255, 255, 0.3) 0 0 2px inset, rgba(0, 0, 0, 0.4) 0 1px 2px;
          text-decoration: none;
          transition-duration: .15s, .15s;
        }

        .button-25:active {
          box-shadow: rgba(0, 0, 0, 0.15) 0 2px 4px inset, rgba(0, 0, 0, 0.4) 0 1px 1px;
        }

        .button-25:disabled {
          cursor: not-allowed;
          opacity: .6;
        }

        .button-25:disabled:active {
          pointer-events: none;
        }

        .button-25:disabled:hover {
          box-shadow: none;
        }
        /* Main Style for page */
        h1 {
            margin: 24px 0;
            padding-bottom: 24px;
            font-size: 32px;
            color: #262626;
        }

        #container {
            text-align: center;
            margin: 30px 0 30px;
        }

        #container p {
            font-size: 13px !important;
            line-height: 18px;
            padding-bottom: 20px;
            width: 50%; /* Adjusted width to half */
            margin: 0 auto; /* Center align */
        }

        .button {
            margin-bottom: 22px;
        }

        button {
            padding: 10px;
            width: 10%;
            border-radius: 10px;
            border: 0px;
            background: #60dfc2;
            cursor: pointer;
        }

        /* Plus button styles */
        .plus-button {
            display: block;
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #007BFF;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    font-size: 24px;
    text-align: center;
    line-height: 50px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    top: 55%;
    left: 71%;
        }

        #addNotesForm {
            display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #f2f2f2;
    padding: 20px;
    width: 379px;
    height: 134px;
    z-index: 9999; /* Ensure it appears on top of other elements */
        }

        .submit {
            background-color: green;
        }

        .cancel {
            background-color: red;
        }

        .delete-icon {
            color: red;
            cursor: pointer;
            padding-top: 15px;
            margin-left: 10px;
        }

        .notification {
            border-width: 1px;
            border-style: solid;
            border-color: #ccc;
            padding-block: 0.25rem;
            padding-inline: 1.25rem; /* Adjusted padding */
            border-radius: 4px;
            max-width: 50%; /* Adjusted maximum width */
            margin: 0 auto; /* Center align */
            box-shadow: 1px 1px 5px #959292;
            display: flex;
            justify-content: space-between;
        }

        .notification-content {
            margin-bottom: 10px;
        }

        .notification-buttons {
            display: flex;
            justify-content: center;
        }

        .notification-button {
            margin: 0 5px;
            padding: 8px 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            background-color: #f2f2f2;
        }

        .notification-button:hover {
            background-color: #e6e6e6;
        }
        #addNotesForm button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 49%;
}
.modal-btn{
    background-color: transparent;
    border-radius: 0;
    color:#1E31E0;
    font-weight: 600;
    width: 100%;
}
.border-right{
    border-right: 1px solid #ccc;
}
.modal-footer {
    padding: 0;
    text-align: center;
    border-top: 1px solid #e5e5e5;
    display: flex;
    justify-content: space-evenly;

}
.modal-dialog-centered {
    display: flex;
    align-items: center;
    min-height: calc(100% - 1rem);
}
.d-flex{
    display: flex;
}
@media (min-width: 768px){
    .modal-dialog {
        width: 300px;
        margin: 30px auto;
    }
    .modal-content {
    width: 300px;
}
}
.comment-modal i {
    font-size: 22px;
    background: transparent;
    color: #44cac6;
    cursor: pointer;
    padding: 0;
    border: 0;
    box-shadow: none;
    position: relative;
    top: -38px;
    left: 250px;
}
.comment-modal i:hover, .comment-modal:active i{
    background-color: transparent;
    box-shadow: none !important;
} 
.comment-modal:hover i{
    background-color: transparent !important;

}
a.comment-modal{
    background-color: transparent;
}
.comment-modal{
    display: inline-block;
}

/* Adjustments for smaller screens */
@media (max-width: 600px) {
    .collabration i.fa-comment {
        padding: 10px; /* Adjust padding for smaller screens */
        font-size: 18px; /* Adjust font size for smaller screens */
        right: 5px; /* Adjust right distance for smaller screens */
    }
}

body{
            background-image: linear-gradient(45deg, #ee9ca7 0%, #ffdde1 100%);
            height: 838px;
        }
    </style>
</head>
<body>
    <!-- Header included -->
  <script>

{% for m in messages %}
      alert('{{ m }}');
{% endfor %}

</script>

    <div id="container">
        <h1>{{x.groupname}}</h1>
        <div class="button">

            <a href="/task/{{x.id}}/">
            <button>TASK</button>
            </a>
            <a href="/activatepage/{{x.id}}/">
                <button >ACTIVATED</button>
            </a>
            <a href="/completedpage/{{x.id}}/">
            <button>COMPLETED</button>
            </a>
             <a href="/verifiedpage/{{x.id}}/">
            <button>VERIFIED</button>
            </a>

        </div>

    </div>
    
    <!-- Plus button -->
    <div class="plus-button" style="margin-left:100px;">
        <a onclick="toggleAddNotesForm()">
            <i class="fas fa-plus" style="color: #ffff;"></i>
        </a>
    </div>
    <form id="activateForm" action="/activate/{{x.id}}/" method="post">
    {% csrf_token %}
    {% if gt %}
        {% for n in gt %}
            {% if n.taskstatus == "Created" %}
                <div class="notification">
<span style="text-align:center; width: 100%; padding-top: 10px; padding-bottom: 10px;">{{ n.taskdetails }}</span>
<span class="d-flex">
                    <input type="checkbox" name="selected_tasks" value="{{ n.id }}">

 		    <i class="fas fa-trash-alt delete-icon"></i>
</span>
                </div>
                <br>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>No data Found</p>
    {% endif %}

    <div style="justify-content:center; text-align:center; margin-left:100px;">
        <button type="button" class="button-25" onclick="activateTasks()">Activate</button>
    </div>
    </form>

<script>
    function activateTasks() {
        // Get all selected checkboxes
        const checkboxes = document.querySelectorAll('input[name="selected_tasks"]:checked');
        const selectedIds = Array.from(checkboxes).map(checkbox => checkbox.value);

        // Add selected IDs to a hidden input field in the form
        const selectedIdsInput = document.createElement('input');
        selectedIdsInput.type = 'hidden';
        selectedIdsInput.name = 'selected_ids';
        selectedIdsInput.value = JSON.stringify(selectedIds);
        document.getElementById('activateForm').appendChild(selectedIdsInput);

        // Submit the form
        document.getElementById('activateForm').submit();
    }
</script>

    <!-- Form to add notes -->
    <div id="addNotesForm">
        <form action="/addgt/{{x.id}}/" method="POST">
            {% csrf_token %}
            <input type="text" name="taskd" placeholder="Enter the note">
            <input type="hidden" name="gname" value="{{x.groupname}}">
            <input type="hidden" name="cid" value="{{x.id}}">
            <button type="submit" onclick="submitNote()" class="submit">Submit</button>
            <button type="button" onclick="cancelAddNotes()" class="cancel">Cancel</button>
        </form>
    </div>
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <!-- <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Activated</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div> -->
                <div class="modal-body text-center">
                    <!-- <p><b>Activated</b></p> -->
                    <p>Task will be activated?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="modal-btn border-right" data-dismiss="modal">No</button>
                    <button type="button" class="modal-btn"><a href="/task/{{ cid }}">Yes</a></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModalCentercomplete" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <!-- <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Activated</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div> -->
                <div class="modal-body text-center">
                    <!-- <p><b>Activated</b></p> -->
                    <p>TIs this task is completed?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="modal-btn border-right" data-dismiss="modal">No</button>
                    <button type="button" class="modal-btn"><a href="/task/{{ cid }}">Yes</a></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exampleModalCenterverified" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <!-- <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Activated</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div> -->
                <div class="modal-body text-center">
                    <!-- <p><b>Activated</b></p> -->
                    <p>TIs this task is verified?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="modal-btn border-right" data-dismiss="modal">No</button>
                    <button type="button" class="modal-btn"><a href="/task/{{ cid }}">Yes</a></button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>

    <script>
        function confirmActivate() {
            var confirmation = confirm("Do you want to continue?");
            if (confirmation) {
                // If user clicks 'Yes', redirect to another page
                // window.location.href ="{% url 'task1' %}"; // Replace with your desired URL
            }
        }

        function toggleAddNotesForm() {
            var form = document.getElementById("addNotesForm");
            form.style.display = form.style.display === "none" ? "block" : "none";
        }

        function cancelAddNotes() {
            var form = document.getElementById("addNotesForm");
            form.style.display = "none";
        }

        function submitNote() {
            var noteContent = document.getElementById("noteContent").value;
            // Create a new notification div
            var newNotification = document.createElement("div");
            newNotification.className = "notification"; // Apply the same class as existing notifications
            
            // Create a new <p> element for the note content
            var newParagraph = document.createElement("p");
            newParagraph.textContent = noteContent;
            
            // Create a delete icon
            var deleteIcon = document.createElement("i");
            deleteIcon.className = "fas fa-trash-alt delete-icon";
            deleteIcon.onclick = function() {
                // Remove the parent div (notification) when the delete icon is clicked
                this.parentNode.remove();
            };
            
            // Append the new <p> element to the new notification div
            newNotification.appendChild(newParagraph);
            
            // Append the delete icon before the text
            newNotification.appendChild(deleteIcon);
            
            // Append the new notification div to the container
            var container = document.getElementById("container");
            container.appendChild(newNotification);
            
            // Clear the input field
            document.getElementById("noteContent").value = "";
            
            // Hide the form
            var form = document.getElementById("addNotesForm");
            form.style.display = "none";
        }
    </script>
</body>
</html>
